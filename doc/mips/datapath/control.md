# 控制器

### 接受停顿请求

| 信号       | 方向 | 位宽 | 线号   | 描述                             |
| ---------- | ---- | ---- | ------ | -------------------------------- |
| ibus_stall | 输入 | 1    | IF.C.2 | 来自指令总线的停顿请求           |
| dbus_stall | 输入 | 1    | MM.C.2 | 来自数据总线的停顿请求           |
| exec_stall | 输入 | 1    | EX.C.2 | 来自EX阶段多周期运算器的停顿请求 |

### 异常处理

| 信号        | 方向 | 位宽   | 线号   | 描述             |
| ----------- | ---- | ------ | ------ | ---------------- |
| except      | 输出 | 1      | MM.A.3 | 是否有异常       |
| except_addr | 输出 | W_ADDR | MM.A.3 | 异常处理目标地址 |

### PC寄存器控制

| 信号           | 方向 | 位宽   | 线号   | 描述                     |
| -------------- | ---- | ------ | ------ | ------------------------ |
| pc_enable      | 输出 | 1      | IF.C.1 | PC寄存器的使能信号       |
| pc_except      | 输出 | 1      | IF.A.1 | 异常处理目标地址是否有效 |
| pc_except_addr | 输出 | W_ADDR | IF.A.1 | 异常处理目标地址         |

### 流水线控制

| 信号     | 方向 | 位宽 | 描述                                    |
| -------- | ---- | ---- | --------------------------------------- |
| fd_stall | 输出 | 1    | IF-ID间寄存器停顿信号，高电平有效，下同 |
| de_stall | 输出 | 1    | ID-EX间寄存器停顿信号                   |
| em_stall | 输出 | 1    | EX-MM间寄存器停顿信号                   |
| mw_stall | 输出 | 1    | MM-WB间寄存器停顿信号                   |
| fd_flush | 输出 | 1    | IF-ID间寄存器刷新信号，高电平有效，下同 |
| de_flush | 输出 | 1    | ID-EX间寄存器刷新信号                   |
| em_flush | 输出 | 1    | EX-MM间寄存器刷新信号                   |
| mw_flush | 输出 | 1    | MM-WB间寄存器刷新信号                   |

### 数据前推

| 信号            | 方向 | 位宽   | 线号   | 描述                                       |
| --------------- | ---- | ------ | ------ | ------------------------------------------ |
| ex_oper         | 输入 | W_OPER | EX.C.1 | 来自EX阶段的操作码                         |
| ex_regf         | 输入 | W_REGF | EX.C.1 | 来自EX阶段的前推寄存器号，如无则为零，下同 |
| ex_data         | 输入 | W_DATA | EX.D.2 | 来自EX阶段的前推数据                       |
| mm_oper         | 输入 | W_OPER | MM.C.1 | 来自MM阶段的操作码                         |
| mm_regf         | 输入 | W_REGF | MM.C.1 | 来自MM阶段的前推寄存器号                   |
| mm_data         | 输入 | W_DATA | MM.D.1 | 来自MM阶段的前推数据                       |
| id_rs           | 输入 | W_REGF | ID.C.1 | ID阶段需要读的第一个寄存器号               |
| id_rd           | 输入 | W_REGF | ID.C.1 | ID阶段需要读的第二个寄存器号               |
| forward_rs      | 输出 | 1      | ID.D.1 | 向ID阶段前推的第一个数据的有效性           |
| forward_rs_data | 输出 | W_DATA | ID.D.1 | 向ID阶段前推的第一个数据                   |
| forward_rd      | 输出 | 1      | ID.D.1 | 向ID阶段前推的第二个数据的有效性           |
| forward_rd_data | 输出 | W_DATA | ID.D.1 | 向ID阶段前推的第二个数据                   |
